grafana:
  enabled: true
  sidecar:
    datasources:
      enabled: true
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    labels: { }
    hosts:
      - grafana.wouritech.com
    path: /
    tls:
      - secretName: grafana-general-tls
        hosts:
         - grafana.wouritech.com

  additionalDataSources:
    - name: loki
      type: loki
      url: http://loki-loki-distributed-gateway.monitoring:80
      access: proxy
      isDefault: false
#  persistence:
#    enabled: true
#    type: pvc
#    storageClassName: csi-s3
#    name: grafana-storage
#    size: 5Gi
#    accessModes:
#      - ReadWriteMany

prometheus:
  ingress:
    enabled: true
    ingressClassName: nginx
    annotations:
      cert-manager.io/cluster-issuer: letsencrypt-prod
    labels: { }
    hosts:
      - prometheus.wouritech.com
    paths:
      - /
    tls:
      - secretName: prometheus-general-tls
        hosts:
         - prometheus.wouritech.com

  prometheusSpec:
    additionalScrapeConfigs:
      - job_name: 'qdrant'
        metrics_path: /metrics
        static_configs:
          - targets: ['qdrant.qdrant:6333']
            labels:
              host: qdrant
        metric_relabel_configs:
          - source_labels: ['__name__']
            target_label: '__name__'
            regex: '(.*)'
            action: 'replace'
            replacement: 'qdrant_$1'

    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: "csi-s3"
          accessModes: ["ReadWriteMany"]
          resources:
            requests:
              storage: "5Gi"

nodeExporter:
  enable: true
  operatingSystems:
    linux:
      enabled: true
    aix:
      enabled: false
    darwin:
      enabled: false
    windows:
      enabled: false

#alertmanager:
#  alertmanagerSpec:
#    storage:
#      volumeClaimTemplate:
#        spec:
#          storageClassName: "do-block-storage"
#          accessModes: ["ReadWriteOnce"]
#          name: alertmanager-storage
#          resources:
#            requests:
#              storage: "10Gi"
